---
title: 後半まえがき
---

未公開原稿だよ
ここからはκeen単体でのCC BY-NC-SA 4.0だよ

κeenです。本稿では前回のパターンマッチの基礎に引き続きパターンマッチのコンパイルとそれに関連した話題を取り扱います。
2回目となる今回はパターンマッチのコンパイルのアルゴリズムとその実装についてです。
パターンマッチのコンパイル主なコンパイルアルゴリズムは2つありますが、どちらとも実装を交えて解説します。
<!-- 2回目というか後編？最終回？ -->

前回に引き続き題材にするのは関数型言語Standard ML（SML）を意識したパターンマッチです。
SML風の簡単な言語のパターンマッチをC風な言語へ変換するコンパイラをRustで書きます。
SMLのパターンマッチは標準的なので本記事で紹介するコンパイル技法はパターンマッチのある大抵の他の言語にも当て嵌るでしょう。

本記事の究極的な対象読者はパターンマッチのある言語のコンパイラを作ろうとしている人ですが、もちろんそれに限りません。
パターンマッチやコンパイラについては前提知識を仮定せずに解説しながら進めますのでパターンマッチのある言語のユーザであれば広く有用な内容だと思っています。
コンパイラのコード自体パターンマッチを多用しているのでパターンマッチをご存知ない方も導入として一読の価値があるかもしれません。

本記事を読むにあたって、以下の知識が必要です。

* プログラミングの経験
* C言語の基本的な素養。特に `struct` 、 `enum` 、 `union` 、 `switch` 、 `goto` を知っている必要がある
* Rustの基本的な素養。書けなくても良いですが、読める必要があります。サンプルの実装はRustで書かれます。
* SMLか、それに類する関数型言語の基本的素養。SMLの文法や挙動は前回説明しましたが、いわゆるC-like syntaxな言語しか知らない方は少し初見のハードルが高いと感じるかもしれません。

また、以下の知識があると理解が深まります。

* パターンマッチのある言語の知識
* コンパイラ作成の経験
* コンパイラ中間言語の知識。


これらの知識が得られるMinCaml（[https://github.com/esumii/min-caml](https://github.com/esumii/min-caml)）コンパイラやその解説（[http://esumii.github.io/min-caml/](http://esumii.github.io/min-caml/)）を併読するといっそう理解が深まるかと思います。

