---
title: "型駆動開発"
---

本章ではIdrisで推奨されるプログラムの開発方法、型駆動開発について学びます。

# 型駆動開発とは

型駆動開発（Type Driven Development）とはその名の通り型を基軸にしてプログラムを書き進める開発方法です。まずプログラムの型を書き、その型に合うプログラムをHoleを使いつつ書き始めます。少し書き進めるとコンパイラから型エラーや環境情報などの形でフィードバックが得られるので、そのフィードバックを元にプログラムをさらに書き進めるという形で進みます。以下の3つのプロセスがあります。

* Type: 最初の型書く、あるいはHoleの型を調べて次の進め方を決める
* Define: 型に合う関数を定義する。トップレベルの関数のこともあればサブ関数であることもある
* Refine: プログラムを書き進める、あるいは型を修正してより適切な形にする

典型的にはType→Define→Refineの順で進みますがType→Refine→Type→Refineのような進行もありえます。

型はプログラムの正しさを保証する仕組みの1つなので、型駆動開発はテスト駆動開発にも似ていますが、型情報は処理系が詳しく知っているので精細なフィードバックやツールのサポートが得られる点が面白いところです。

# Idrisの型駆動開発サポート

Idrisは型駆動開発のために開発された言語ということもあって各種サポートがあります。

* Hole
  + Holeの型を調べられる
  + 未完成のプログラムも書けるようになる
* 依存型による詳細な型
  + 型を詳細に書けるほどプログラムを書くときのガイドとしての力が強くなる
* 名前つきパラメータ
* 型定義から本体定義の自動生成
* 処理系による編集コマンド
  + 型を元にしたrefineを一部自動でやってくれる

さらにはIdrisの作者自身[Type Driven Development with Idris](https://www.manning.com/books/type-driven-development-with-idris)という本を著しています。これは無料でも読めるので是非一読下さい。既に型駆動開発を題材にした書籍があるので、本書では雰囲気を掴める程度、「型駆動開発って面白い」って思える程度に紹介していけてらなと思います。
